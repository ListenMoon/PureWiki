[{"slug":"失落之城-主题","category":"blog","title":"失落之城-主题","description":"一个Astro主题","body":"\n[TOC]\n\n## Meta\n\n文章可用元输入如下（有一些其他的，可以自己看代码，tpyings 尚不完善，得看布局代码）\n\n```\ntitle: Markdown测试       <!-- 必须，文章标题 -->\ndescription: 描述         <!-- 描述，可用作seo，文章中暂未展示 -->\npubDate: 2022/5/12        <!-- 发布日期 -->\nupdatedDate: 2023/01/01   <!-- 修改日期-->\nheroImage: \"\"             <!-- 文章头图 -->\nheroPosition: \"\"          <!-- 文章头图显示位置，默认center -->\ntop: true                 <!-- 展示在右上方 -->\nmode: chinese             <!-- 首行缩进 -->\n```\n\n## 特性\n\n### 内嵌标题\n\n```\n[TOC]\n```\n\n效果：\n\n[TOC]\n\n### markdown 指令转 html\n\n```\n:abbr[提示]{title=\"提示\"}\n```\n\n效果：\n:abbr[提示]{title=\"提示\"}\n\n### 面板\n\n```\n::::card\n横排排版演示\n:::card-title\n横排排版演示\n:::\n::::\n\n::::card{#vertical}\n竖排排版演示\n:::card-title\n竖排排版演示\n:::\n::::\n```\n\n效果：\n::::card\n横排排版演示\n:::card-title\n横排排版演示\n:::\n::::\n::::card{#vertical}\n竖排排版演示\n:::card-title\n竖排排版演示\n:::\n::::\n\n### 配置头图为文章中的第一张图片\n\n将配置的`showArticleHeroImage`设置为 true\n\n### 启用在源文件编辑\n\n将配置的`enableRemote`设置为 true，其源码地址也需要配置\n\n-   githubEditURL\n-   githubNewURL\n\n### mermaid\n\n````\n```flow\nflowchart TD\n    A[/Christmas\\]\n    A -->|Get money| B[\\Go shopping/]\n    B --> C{Let me thinksssss<br/>ssssssssssssssssssssss<br/>sssssssssssssssssssssssssss}\n    C -->|One| D[/Laptop/]\n    C -->|Two| E[\\iPhone\\]\n    C -->|Three| F[Car]\n```\n````\n\n效果：\n\n```flow\nflowchart TD\n    A[/Christmas\\]\n    A -->|Get money| B[\\Go shopping/]\n    B --> C{Let me thinksssss<br/>ssssssssssssssssssssss<br/>sssssssssssssssssssssssssss}\n    C -->|One| D[/Laptop/]\n    C -->|Two| E[\\iPhone\\]\n    C -->|Three| F[Car]\n```\n\n### mathjax\n\n```\n    $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$\n\n    $$\tx = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n```\n\n效果：\n$\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$\n$$ x = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n\n### 命令 iframe 和 iframec\n\n`iframe`为收缩框默认打开  \n`iframec`为收缩框默认关闭\n\n````\n```\n::iframe[流程图Demo]{url=/demo/字体/HarmonyOS/index.html}\n::iframec[流程图Demo]{url=/demo/字体/HarmonyOS/index.html}\n```\n````\n\n效果\n::iframe[流程图 Demo]{url=/demo/字体/HarmonyOS/index.html}\n::iframec[流程图 Demo]{url=/demo/字体/HarmonyOS/index.html}\n\n### 命令 demo\n\n````\n:::demo\n```html\n<div>\n    <div>before content<div>\n    text\n    <div>after content<div>\n</div>\n```\n:::\n````\n\n效果：\n:::demo\n\n```html\n<div>\n    <div>\n        before content\n        <div>\n            text\n            <div>\n                after content\n                <div></div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n\n:::\n\n引用其他 demo:\n\n```\n::demo{path=\"/demo/字体/HarmonyOS/index.html\"}\n```\n\n效果：\n::demo{path=\"/demo/字体/HarmonyOS/index.html\"}\n\n## 开发计划\n\n> 暂无新功能的想法，有啥想法的可以说\n\n-   [ ] 优化代码与样式\n"},{"slug":"CSS/image-rendering","category":"blog","title":"image-rendering","description":"用于设置图像缩放算法。它适用于元素本身，适用于元素其他属性中的图像，也应用于子元素。","body":"\n`image-rendering` 用于设置图像缩放算法。它适用于元素本身，适用于元素其他属性中的图像，也应用于子元素。\n\n当页面作者指定的尺寸不是图像的原始尺寸时，用户代理将缩放图像。缩放也可能由于用户互动（双指缩放）而发生。举个例子，如果有一张尺寸为 100×100px 的图片，但作者有意将尺寸设置为 200×200px（或 50×50px），然后，图片便会根据 image-rendering 指定的算法，缩小或放大到新尺寸。此属性对于未缩放的图像没有影响。\n\n## 属性值\n\n| 属性 | 描述 |\n| :--- | :--- |\n| auto |  自 Gecko 1.9（Firefox 3.0）起，Gecko 使用双线性（bilinear）算法进行重新采样（高质量）。    |\n| :abbr[smooth]{title=\"实验性\"}| 应使用能最大化图像客观观感的算法来缩放图像。特别地，会“平滑”颜色的缩放算法是可以接受的，例如双线性插值。这适用于照片等类型的图像。|\n|:abbr[high-quality]{title=\"实验性\"}|与 smooth 相同，但更倾向于高质量的缩放。如果系统资源受到限制，在考虑降低哪些图像的质量以及降低到什么程度时，high-quality 的图像应该优先于任何其他值的图像。|\n|crisp-edges|必须使用可有效保留对比度和图像中的边缘的算法来对图像进行缩放，并且，该算法既不会平滑颜色，又不会在处理过程中为图像引入模糊。合适的算法包括最近邻居（nearest-neighbor）算法和其他非平滑缩放算法，比如 2×SaI 和 hqx-* 系列算法。此属性值适用于像素艺术作品，例如一些网页游戏中的图像。|\n|pixelated|放大图像时，使用最近邻居算法，因此，图像看着像是由大块像素组成的。缩小图像时，算法与 auto 相同。|\n\n> 备注： 早期草案中出现的 optimizationQuality 和 optimizationSpeed （来自 SVG 的对应值）分别被定义为 smooth 和 pixelated。\n\n::iframe[示例]{url=\"https://interactive-examples.mdn.mozilla.net/pages/css/image-rendering.html\"}\n\n## 资料\n-   https://developer.mozilla.org/zh-CN/docs/Web/CSS/image-rendering\n-   https://segmentfault.com/q/1010000010391524\n\n"},{"slug":"博客相关/集成评论框","category":"blog","title":"集成评论框","description":"","body":"\n## 起因\n\n对于这个博客来说，我尝试了许多评论插件，例如 giscus，utteranc，gitalk 啥的，都是基于 github 的，有的是 github 的讨论，又是 github 的 issue，这样的好处是邮件自动集成了，但用起来总感觉有点垃圾。\n\n最后，我选择了 utteranc，这个集成比较简单，不需要啥 clientID 啥的，评论输出再 github 的 issue 中。\n\n## 探索\n\n按照[官网](https://utteranc.es/)提供的集成代码来说是可以的，但是当使用了 pjax 时就需要修改了。\n\n```html\n<script\n    src=\"https://utteranc.es/client.js\"\n    repo=\"[ENTER REPO HERE]\"\n    issue-term=\"pathname\"\n    theme=\"github-light\"\n    crossorigin=\"anonymous\"\n    async\n></script>\n```\n\n由于`client.js`使用的时`document.currentScript`来定位该 script 元素，当界面刷新时自然不会有啥问题，但是 pjax 是不刷新界面二十直接替换 dom 的，即使 script 重新替换执行，[document.currentScript](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/currentScript)的值变成了`null`(由于是在 pjax 的回调中执行的，**应该是这个原因，可能得测试看看**),表示就找不到这个 script 了，也就无法替换掉 script 生成评论框了。\n\n总之呢，我们换一种方法就是了，我将上面这段代码用 document 生成然后插入到 dom 中就好了。\n\n```js 静态文件：\\libs\\utteranc.client.js\nvar script = document.createElement(\"script\");\nscript.setAttribute(\"src\", \"https://utteranc.es/client.js\");\nscript.setAttribute(\"repo\", \"ListenMoon/PureWiki\");\nscript.setAttribute(\"issue-term\", \"pathname\");\nscript.setAttribute(\"label\", \"收录\");\nscript.setAttribute(\"theme\", \"github-light\");\nscript.setAttribute(\"crossorigin\", \"anonymous\");\nscript.setAttribute(\"async\", \"\");\n\nscript.onerror = function () {\n    if (sc) {\n        sc.innerText = \"评论加载失败，刷新重试\";\n    }\n};\nvar sc = document.getElementById(\"utteranc-sc\");\n// var parentNode = sc.parentNode;\nsc.appendChild(script);\n\nif (document.currentScript && document.currentScript.parentNode) {\n    document.currentScript.parentNode.removeChild(document.currentScript);\n}\n```\n\n```html 界面上集成\n<style is:global>\n    .utterances {\n        max-width: 100% !important;\n        background: var(--mian-bg-color);\n    }\n    .utterances iframe {\n        padding: 0 25px;\n        box-sizing: border-box;\n    }\n</style>\n<div\n    id=\"utteranc-sc\"\n    style=\"text-align: center;padding: 0 0;margin: 0 1em;position:relative;min-height: 100px;margin-top:1em;\"\n>\n    <span\n        style=\"position:absolute;top: 50px;left:50%;transform: translateX(-50%);\"\n        >评论加载中...</span\n    >\n    <script is:raw src=\"/libs/utteranc.client.js\"></script>\n</div>\n```\n\n如此，替换的就是`<script is:raw src=\"/libs/utteranc.client.js\"></script>`这个 script 了。这样的话刷新跟 pjax 都是支持的。\n\n## 结论\n\n有问题思考怎么解决问题，解决不了就换个问题。\n"}]